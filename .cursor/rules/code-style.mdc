---
description: C++ code style rules for BagiEngine
globs:
  - "**/*.cpp"
  - "**/*.h"
  - "**/*.hpp"
alwaysApply: true
---

# C++ Code Style

## Naming Conventions

| Element | Style | Example |
|---------|-------|---------|
| Class | PascalCase | `FileSystem` |
| Method | PascalCase | `Initialize()` |
| Variable | camelCase | `virtualPath` |
| Private member | _camelCase | `_isRunning` |
| Namespace | PascalCase | `BECore` |
| Enum/Constant | PascalCase | `EventType::KeyDown` |
| Enum definition | CORE_ENUM macro | `CORE_ENUM(State, uint8_t, Idle, Running)` |
| Template param | T, TName | `template<typename T>` |

## File Structure

- `#pragma once` — always (never include guards)
- External includes first, then internal
- Opening brace on same line
- Namespace closing comment required: `} // namespace BECore`
- Inline member initialization: `bool _flag = false;`

## Formatting Rules

- **Indentation**: 4 spaces (no tabs)
- **Line length**: ~120 characters max
- **Pointers/References**: `Type* ptr`, `Type& ref`
- **Includes**: Sorted, grouped (external → internal → local)

## Modern C++ Preferences

- Use `auto` when type is obvious
- Use range-based `for`
- Use structured bindings
- Use `std::optional` for nullable values
- Use EASTL containers

## Assertion Macros

From `BECore/Assert/AssertMacros.h`:
- `ASSERT(expr)` / `ASSERT(expr, "msg")` — critical check
- `EXPECT(expr)` / `EXPECT(expr, "msg")` — soft expectation
- `FATALERROR("msg")` — unrecoverable error

**Key points:**
- Always use `ASSERT` instead of `std::assert`
- Supports optional messages
- Can be disabled via CMake options
